#pragma once

#include <iostream>
#include <SUNNY.h>
#include "../07_SERVER/BossLockerProtocol.h"
#include "../07_SERVER/BossLocker.h"
#include "MouseLayer2D.h"


using namespace std;
using namespace sunny;
using namespace graphics;
using namespace events;
using namespace game;

class GameOverLayer2D : public Layer2D
{
private:
	Layer3D * layer3d;

	Texture2D* m_gameOverBackgroundTexture;
	Sprite*    m_gameOverBackground;
	Texture2D* m_gameOverTexture;
	Sprite*    m_gameOver;
	Label* m_state;

	vector<Texture2D*> m_characterTextures;

	int m_index;
	int m_count;

	struct element { int x; int y; };

	unordered_map<int, element> snails = 
	{
		{0,  {8, 0}},   { 1,{ 8, 1 } },  { 2,  { 8, 2 } },  { 3,  { 8, 3 } },  { 4,  { 8, 4 } },  { 5,  { 8, 5 } },  {6,   {8, 6}},  { 7,  { 8, 7 } },  { 8,  { 8, 8 } },  { 9,  { 8, 9 } },  { 10,{ 8, 10 } },  { 11,  { 8, 11 } },  { 12, { 8, 12 } },  { 13,{ 8, 13 } },  { 14,{ 8, 14 } },  { 15,{ 8, 15 } },
		{45, {7, 0}},  { 46,{ 7, 1 } },  { 47, { 7, 2 } },  { 48, { 7, 3 } },  { 49, { 7, 4 } },  { 50, { 7, 5 } },  {51,  {7, 6}},  { 52, { 7, 7 } },  { 53, { 7, 8 } },  { 54, { 7, 9 } },  { 55,{ 7, 10 } },  { 56,  { 7, 11 } },  { 57, { 7, 12} },  { 58, { 7, 13 } },  { 59,{ 7, 14 } },  { 16,{ 7, 15 } },
		{44, {6, 0}},  { 83,{ 6, 1 } },  { 84, { 6, 2 } },  { 85, { 6, 3 } },  { 86, { 6, 4 } },  { 87, { 6, 5 } },  {88,  {6, 6}},  { 89, { 6, 7 } },  { 90, { 6, 8 } },  { 91, { 6, 9 } },  { 92,{ 6, 10 } },  { 93,  { 6, 11 } },  { 94, { 6, 12} },  { 95, { 6, 13 } },  { 60,{ 6, 14 } },  { 17,{ 6, 15 } },
		{43, {5, 0}},  { 82,{ 5, 1 } },  { 113,{ 5, 2 } },  { 114,{ 5, 3 } },  { 115,{ 5, 4 } },  { 116,{ 5, 5 } },  {117, {5, 6}},  { 118,{ 5, 7 } },  { 119,{ 5, 8 } },  { 120,{ 5, 9 } },  { 121,{ 5,10 } },  { 122,{ 5, 11 } },  { 123, { 5, 12 } },  { 96,{ 5, 13 } },  { 61,{ 5, 14 } },  { 18,{ 5, 15 } },
		{42, {4, 0}},  { 81,{ 4, 1 } },  { 112,{ 4, 2 } },  { 135,{ 4, 3 } },  { 136,{ 4, 4 } },  { 137,{ 4, 5 } },  {138, {4, 6}},  { 139,{ 4, 7 } },  { 140,{ 4, 8 } },  { 141,{ 4, 9 } },  { 142,{ 4, 10 } },  { 143,{ 4, 11 } },  { 124,{ 4, 12 } },  { 97,{ 4, 13 } },  { 62,{ 4, 14 } },  { 19,{ 4, 15 } },
		{41, {3, 0}},  { 80,{ 3, 1 } },  { 111,{ 3, 2 } },  { 134,{ 3, 3 } },  { 133,{ 3, 4 } },  { 132,{ 3, 5 } },  {131, {3, 6}},  { 130,{ 3, 7 } },  { 129,{ 3, 8 } },  { 128,{ 3, 9 } },  { 127,{ 3, 10 } },  { 126,{ 3, 11 } },  { 125,{ 3, 12 } },  { 98,{ 3, 13 } },  { 63,{ 3, 14 } },  { 20,{ 3, 15 } },
		{40, {2, 0}},  { 79,{ 2, 1 } },  { 110,{ 2, 2 } },  { 109,{ 2, 3 } },  { 108,{ 2, 4 } },  { 107,{ 2, 5 } },  {106, {2, 6}},  { 105,{ 2, 7 } },  { 104,{ 2, 8 } },  { 103,{ 2, 9 } },  { 102,{ 2, 10 } },  { 101,{ 2, 11 } },  { 100,{ 2, 12 } },  { 99,{ 2, 13 } },  { 64,{ 2, 14 } },  { 21,{ 2, 15 } },
		{39, {1, 0}},  { 78,{ 1, 1 } },  { 77, { 1, 2 } },  { 76, { 1, 3 } },  { 75, { 1, 4 } },  { 74, { 1, 5 } },  {73,  {1, 6}},  { 72, { 1, 7 } },  { 71, { 1, 8 } },  { 70, { 1, 9 } },  { 69,{ 1, 10 } },  { 68,  { 1, 11 } },  { 67, { 1, 12 } },  { 66,{ 1, 13 } },  { 65,{ 1, 14 } },  { 22,{ 1, 15 } },
		{38, {0, 0}},  { 37,{ 0, 1 } },  { 36, { 0, 2 } },  { 35, { 0, 3 } },  { 34, { 0, 4 } },  { 33, { 0, 5 } },  {32,  {0, 6}},  { 31, { 0, 7 } },  { 30, { 0, 8 } },  { 29, { 0, 9 } },  { 28,{ 0, 10 } },  { 27,  { 0, 11 } },  { 26, { 0, 12 } },  { 25,{ 0, 13 } },  { 24,{ 0, 14 } },  { 23,{ 0, 15 } },
	};

public:
	GameOverLayer2D(Layer3D* layer);
	~GameOverLayer2D();

	void OnInit(Renderer2D& renderer);
	void OnTick() override;
	void OnUpdate(const utils::Timestep& ts) override;
	void OnRender(Renderer2D& renderer);
	void OnEvent(Event& event) override;

	bool OnMousePressedEvent(MousePressedEvent& event);
	bool OnKeyPressedEvent(KeyPressedEvent&     event);
};